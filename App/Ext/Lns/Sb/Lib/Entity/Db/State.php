<?php 
namespace Lns\Sb\Lib\Entity\Db;


class State extends \Lns\Sb\Lib\Entity\ClassOverride\OfDbEntity {
	
	const COLUMNS = [
		'id',
		'name',
		'region_code',
		'code',
		'created_at',
		'updated_at',
	];
	

	protected $tablename = 'lib_state';
	protected $primaryKey = 'id';

	public $_userProfile;
	public $_address;
	public $_contact;
	public $_attachments;
	public $_roles;
	protected $_session;
	protected $_validator;
	protected $_password;
	protected $result;

	public function __construct(
		\Of\Http\Request $Request,
		UserProfile $UserProfile,
		Address $Address,
		Contact $Contact,
		Attachments $Attachments,
		\Lns\Sb\Lib\ValidateField $ValidateField,
		\Lns\Sb\Lib\Password\Password $Password,
		Roles $Roles
	){
		$this->_userProfile = $UserProfile;
		$this->_address = $Address;
		$this->_contact = $Contact;
		$this->_attachments = $Attachments;
		$this->_roles = $Roles;
		$this->_validator = $ValidateField;
		$this->_password = $Password;
		parent::__construct($Request);
	}

	public function getStateByRegionId($id){	
		// $mainTable = $this->getTableName();
		// $user = $this->getByColumn(['region_code' => $id]);
		// return $user;

		$this->resetQuery();
		$this->_select->where(['region_code' => $id]);
		$datas = $this->getCollection();

		return $datas;
    } 

    public function getStates(){
		$this->setOrderBy('created_at');
		$this->setIsCache(true);
		$this->setCacheMaxLifeTime(60*60*24*30);
		$states = $this->getFinalResponse();
		/* need to reset cache for the next database call */
		$this->setIsCache(false)->setCacheMaxLifeTime(0);

		return $states;
	}

	public function installData(){
		$mainTable = $this->getTableName();

		$query = "INSERT INTO `".$mainTable."` (`name`, `region_code`, `shipping_region_id`, `code`, `created_at`, `updated_at`) VALUES
    ('Ilocos Norte', 1, 2, '128', '2018-08-23 13:19:35', '2018-11-06 09:08:08'),
    ('Ilocos Sur', 1, 2, '129', '2018-08-23 13:19:35', '2018-11-06 09:08:08'),
    ('La Union', 1, 2, '133', '2018-08-23 13:19:35', '2018-11-06 09:08:08'),
    ('Pangasinan', 1, 2, '155', '2018-08-23 13:19:35', '2018-11-06 09:08:08'),
    ('Batanes', 2, 2, '209', '2018-08-23 13:19:35', '2018-11-06 09:09:02'),
    ('Cagayan', 2, 2, '215', '2018-08-23 13:19:35', '2018-11-06 09:09:02'),
    ('Isabela', 2, 2, '231', '2018-08-23 13:19:35', '2018-11-06 09:09:02'),
    ('Nueva Vizcaya', 2, 2, '250', '2018-08-23 13:19:35', '2018-11-06 09:09:02'),
    ('Quirino', 2, 2, '257', '2018-08-23 13:19:35', '2018-11-06 09:09:02'),
    ('Bataan', 3, 2, '308', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Bulacan', 3, 2, '314', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Nueva Ecija', 3, 2, '349', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Pampanga', 3, 2, '354', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Tarlac', 3, 2, '369', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Zambales', 3, 2, '371', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Aurora', 3, 2, '377', '2018-08-23 13:19:35', '2018-11-06 09:33:24'),
    ('Batangas', 4, 3, '410', '2018-08-23 13:19:35', '2018-11-06 09:17:35'),
    ('Cavite', 4, 3, '421', '2018-08-23 13:19:35', '2018-11-06 09:17:35'),
    ('Laguna', 4, 3, '434', '2018-08-23 13:19:35', '2018-11-06 09:17:35'),
    ('Quezon', 4, 3, '456', '2018-08-23 13:19:35', '2018-11-06 09:17:35'),
    ('Rizal', 4, 3, '458', '2018-08-23 13:19:35', '2018-11-06 09:17:35'),
    ('Marinduque', 17, 3, '1740', '2018-08-23 13:19:35', '2018-11-06 09:32:25'),
    ('Occidental Mindoro', 17, 3, '1751', '2018-08-23 13:19:35', '2018-11-06 09:32:25'),
    ('Oriental Mindoro', 17, 3, '1752', '2018-08-23 13:19:35', '2018-11-06 09:32:25'),
    ('Palawan', 17, 3, '1753', '2018-08-23 13:19:35', '2018-11-06 09:32:25'),
    ('Romblon', 17, 3, '1759', '2018-08-23 13:19:35', '2018-11-06 09:32:25'),
    ('Albay', 5, 3, '505', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Camarines Norte', 5, 3, '516', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Camarines Sur', 5, 3, '517', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Catanduanes', 5, 3, '520', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Masbate', 5, 3, '541', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Sorsogon', 5, 3, '562', '2018-08-23 13:19:35', '2018-11-06 09:32:09'),
    ('Aklan', 6, 4, '604', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Antique', 6, 4, '606', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Capiz', 6, 4, '619', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Iloilo', 6, 4, '630', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Negros Occidental', 6, 4, '645', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Guimaras', 6, 4, '679', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Bohol', 7, 4, '712', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Cebu', 7, 4, '722', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Negros Oriental', 7, 4, '746', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Siquijor', 7, 4, '761', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Eastern Samar', 8, 4, '826', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Leyte', 8, 4, '837', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Northern Samar', 8, 4, '848', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Western Samar', 8, 4, '860', '2018-08-23 13:19:35', '2018-11-13 08:03:41'),
    ('Southern Leyte', 8, 4, '864', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Biliran', 8, 4, '878', '2018-08-23 13:19:35', '2018-11-06 09:20:02'),
    ('Zamboanga Del Norte', 9, 5, '972', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Zamboanga Del Sur', 9, 5, '973', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Zamboanga Sibugay', 9, 5, '983', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Bukidnon', 10, 5, '1013', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Camiguin', 10, 5, '1018', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Lanao Del Norte', 10, 5, '1035', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Misamis Occidental', 10, 5, '1042', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Misamis Oriental', 10, 5, '1043', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Davao Del Norte', 11, 5, '1123', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Davao Del Sur', 11, 5, '1124', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Davao Oriental', 11, 5, '1125', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Compostela Valley', 11, 5, '1182', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Davao Occidental', 11, 5, '1186', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Cotabato', 12, 5, '1247', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('South Cotabato', 12, 5, '1263', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Sultan Kudarat', 12, 5, '1265', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Sarangani', 12, 5, '1280', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('Cotabato City', 12, 5, '1298', '2018-08-23 13:19:35', '2018-11-06 09:21:34'),
    ('NCR,City Of Manila,First District', 13, 1, '1339', '2018-08-23 13:19:35', '2018-11-21 02:06:51'),
    ('NCR,Second District', 13, 1, '1374', '2018-08-23 13:19:35', '2018-11-21 02:06:55'),
    ('NCR,Third District', 13, 1, '1375', '2018-08-23 13:19:35', '2018-11-21 02:06:59'),
    ('NCR,Fourth District', 13, 1, '1376', '2018-08-23 13:19:35', '2018-11-21 02:07:13'),
    ('Abra', 14, 2, '1401', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Benguet', 14, 2, '1411', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Ifugao', 14, 2, '1427', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Kalinga', 14, 2, '1432', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Mountain Province', 14, 2, '1444', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Apayao', 14, 2, '1481', '2018-08-23 13:19:35', '2018-11-06 09:10:56'),
    ('Basilan', 15, 5, '1507', '2018-08-23 13:19:35', '2018-11-06 09:22:38'),
    ('Lanao Del Sur', 15, 5, '1536', '2018-08-23 13:19:35', '2018-11-06 09:22:38'),
    ('Maguindanao', 15, 5, '1538', '2018-08-23 13:19:35', '2018-11-06 09:22:38'),
    ('Sulu', 15, 5, '1566', '2018-08-23 13:19:35', '2018-11-06 09:22:38'),
    ('Tawi-Tawi', 15, 5, '1570', '2018-08-23 13:19:35', '2018-11-06 09:22:38'),
    ('Agusan Del Norte', 16, 5, '1602', '2018-08-23 13:19:35', '2018-11-06 09:30:02'),
    ('Agusan Del Sur', 16, 5, '1603', '2018-08-23 13:19:35', '2018-11-06 09:30:02'),
    ('Surigao Del Norte', 16, 5, '1667', '2018-08-23 13:19:35', '2018-11-06 09:30:02'),
    ('Surigao Del Sur', 16, 5, '1668', '2018-08-23 13:19:35', '2018-11-06 09:30:02'),
    ('Dinagat Islands', 16, 5, '1685', '2018-08-23 13:19:35', '2018-11-06 09:30:02');";

		$datas = $this->_adapter->query(
			$query,
			\Zend\Db\Adapter\Adapter::QUERY_MODE_EXECUTE
		);
	}

}
